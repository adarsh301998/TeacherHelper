package sample.Controllers;

import com.jfoenix.controls.JFXButton;
import com.jfoenix.controls.JFXTextField;
import de.jensd.fx.glyphs.fontawesome.FontAwesomeIcon;
import javafx.fxml.FXML;
import javafx.geometry.Insets;
import javafx.geometry.Pos;
import javafx.scene.control.Label;
import javafx.scene.input.KeyEvent;
import javafx.scene.input.MouseEvent;
import javafx.scene.layout.HBox;
import javafx.scene.layout.VBox;
import javafx.scene.paint.Paint;
import javafx.scene.text.Font;
import sample.DataClasses.DataBaseCommunication;
import sample.DataClasses.MainDataClass;

import java.util.ArrayList;

public class OpenTests {

    @FXML
    private JFXTextField text_name_txt;

    @FXML
    private VBox main_vbox;

    @FXML
    private FontAwesomeIcon close_btn;

    MainDataClass mainDataClass;

    @FXML
    void closeEvent(MouseEvent event) {
        System.exit(0);
    }

    @FXML
    void textFeildEvent(KeyEvent event) {

    }


    public void initialize() {


        mainDataClass = DataBaseCommunication.convertJSONToJava(MainDataClass.class);

        System.out.println(mainDataClass.getTestDetails().get(0).getTeacherName());

        if (mainDataClass != null) {
            String label_intro[] = {
                    "Teacher\t\t\t: ",
                    "Test\t\t\t\t: ",
                    "Institute\t\t\t: ",
                    "Date\t\t\t\t: ",
                    "NoOfQuestion\t\t: ",
                    "NoOfStudents\t\t: "};
            for (int i = 0; i < mainDataClass.getTestDetails().size(); i++) {
                ArrayList<String> arrayList = new ArrayList<>();
                arrayList.add(mainDataClass.getTestDetails().get(i).getTeacherName());
                arrayList.add(mainDataClass.getTestDetails().get(i).getTestName());
                arrayList.add(mainDataClass.getTestDetails().get(i).getInstitute());
                arrayList.add("");
                //arrayList.add(mainDataClass.getTestDetails().get(i).getDateTime().toString());
                arrayList.add(String.valueOf(mainDataClass.getTestDetails().get(i).getNumberOfQuestion()));
                arrayList.add(String.valueOf(mainDataClass.getTestDetails().get(i).getNumberOfStudent()));
                Label label[] = new Label[arrayList.size()];
                for (int j = 0; j < arrayList.size(); j++) {
                    label[j] = new Label(label_intro[j] + arrayList.get(j));
                    label[j].setTextFill(Paint.valueOf("WHITE"));
                    label[j].setFont(new Font("Segoe UI", 20));
                }

                JFXButton open_key_btn = new JFXButton("Key");
                open_key_btn.getStyleClass().add("open-window-button");
                open_key_btn.setFont(new Font(15));

                JFXButton open_students = new JFXButton("Students");
                open_students.getStyleClass().add("open-window-button");
                open_students.setFont(new Font(15));

                HBox hBox = new HBox(open_key_btn, open_students);
                hBox.setAlignment(Pos.BOTTOM_RIGHT);
                hBox.setSpacing(20);

                VBox vBox = new VBox(label);
                vBox.getChildren().add(hBox);
                vBox.getStyleClass().add("vbox");
                vBox.setPadding(new Insets(20));
                vBox.setSpacing(20);
                main_vbox.getChildren().add(vBox);
            }
        }

    }

}
